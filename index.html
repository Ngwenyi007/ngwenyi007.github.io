<!DOCTYPE html><html lang="en"><head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Video Compressor</title>
  <style>
    body {
      font-family: sans-serif;
      background: #f5f5f5;
      margin: 0;
      padding: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      min-height: 100vh;
    }header {
  background: #333;
  color: #fff;
  padding: 1rem 2rem;
  width: 100%;
  text-align: center;
}

.container {
  margin-top: 2rem;
  padding: 1rem;
  background: white;
  border-radius: 8px;
  box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
  max-width: 600px;
  width: 90%;
}

input[type="file"] {
  display: block;
  margin-bottom: 1rem;
}

button {
  background-color: #007bff;
  color: white;
  border: none;
  padding: 0.5rem 1rem;
  border-radius: 4px;
  cursor: pointer;
}

button:hover {
  background-color: #0056b3;
}

.status {
  margin-top: 1rem;
  font-size: 0.9rem;
  color: #444;
}

#ab-dashboard {
  position: fixed;
  bottom: 10px;
  right: 10px;
  background: white;
  border: 1px solid #ccc;
  padding: 0.5rem 1rem;
  font-size: 0.8rem;
  border-radius: 5px;
  box-shadow: 0 0 5px rgba(0, 0, 0, 0.2);
}

  </style>
</head><body>
  <header>
    <h1>Video Compressor</h1>
    <p>Select a video file to compress</p>
<div style="text-align:center; margin: 20px;">
  <button onclick="compressVideo()">✨ Compress Version A ➜ B</button>
</div>


  </header>  <section class="container">
    <input type="file" id="videoInput" accept="video/*">
    <button onclick="compressVideo()">Compress</button>
    <div class="status" id="statusMsg"></div>
  </section>
  <div id="ab-dashboard">Version A</div>
  <script src="https://cdn.jsdelivr.net/npm/@ffmpeg/ffmpeg@0.12.6/dist/ffmpeg.min.js"></script>
<script>
  const { createFFmpeg, fetchFile } = FFmpeg;
  const ffmpeg = createFFmpeg({ log: true });
  let originalFile;

  async function handleFileUpload(event, version) {
    const file = event.target.files[0];
    if (!file) return;

    const url = URL.createObjectURL(file);
    document.getElementById(`video${version}`).src = url;

    const sizeMB = (file.size / (1024 * 1024)).toFixed(2);
    const name = file.name;

    const tempVideo = document.createElement('video');
    tempVideo.src = url;
    tempVideo.onloadedmetadata = async () => {
      const resolution = `${tempVideo.videoWidth}x${tempVideo.videoHeight}`;
      const infoText = `Name: ${name}<br>Size: ${sizeMB} MB<br>Resolution: ${resolution}`;
      document.getElementById(`info${version}`).innerHTML = infoText;
    };

    if (version === 'A') {
      originalFile = file;
    }
  }

  async function compressVideo() {
    if (!originalFile) return alert('Please upload Version A first.');

    if (!ffmpeg.isLoaded()) await ffmpeg.load();

    const inputName = 'input.mp4';
    const outputName = 'compressed.mp4';

    ffmpeg.FS('writeFile', inputName, await fetchFile(originalFile));

    await ffmpeg.run(
      '-i', inputName,
      '-b:v', '800k', // Reduce bitrate
      '-vf', 'scale=640:-1', // Resize width to 640px, auto height
      outputName
    );

    const data = ffmpeg.FS('readFile', outputName);
    const blob = new Blob([data.buffer], { type: 'video/mp4' });
    const compressedURL = URL.createObjectURL(blob);

    document.getElementById('videoB').src = compressedURL;

    // Info section
    const sizeMB = (blob.size / (1024 * 1024)).toFixed(2);
    document.getElementById('infoB').innerHTML = `Compressed Size: ${sizeMB} MB`;

    // Download link
    const downloadBtn = document.createElement('a');
    downloadBtn.href = compressedURL;
    downloadBtn.download = 'compressed.mp4';
    downloadBtn.textContent = '⬇ Download Compressed Video';
    downloadBtn.style.display = 'inline-block';
    downloadBtn.style.marginTop = '10px';

    document.getElementById('infoB').appendChild(downloadBtn);
  }

  // Add listener to a button (add this to your HTML body):
  // <button onclick="compressVideo()">Compress Version A ➜ B</button>
  </script></body></html>
